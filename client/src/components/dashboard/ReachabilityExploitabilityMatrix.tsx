import { useMemo, memo } from "react";

export const ReachabilityExploitabilityMatrix = memo(function ReachabilityExploitabilityMatrix({ evaluations = [] }: { evaluations: any[] }) {
  const stats = useMemo(() => {
    const completed = evaluations.filter((e: any) => e.status === "completed");
    return {
      total: completed.length,
      exploitable: completed.filter((e: any) => e.exploitable).length,
    };
  }, [evaluations]);

  const exploitRate = stats.total > 0 ? Math.round((stats.exploitable / stats.total) * 100) : 0;

  return (
    <div className="falcon-kpi">
      <div className="flex items-center gap-[7px] text-[10px] font-medium tracking-wider uppercase" style={{ color: "var(--falcon-t3)" }}>
        <span className="w-[5px] h-[5px] rounded-full" style={{ background: "var(--falcon-t4)" }} />
        Confirmed Exploits
      </div>
      <div
        className="font-mono text-[32px] font-medium leading-none tracking-tight"
        style={{ color: "var(--falcon-t1)", letterSpacing: "-0.02em" }}
      >
        {stats.exploitable}
      </div>
      <div className="text-[10px]" style={{ color: "var(--falcon-t3)" }}>
        {exploitRate}% exploit rate across {stats.total} operations
      </div>
    </div>
  );
});
