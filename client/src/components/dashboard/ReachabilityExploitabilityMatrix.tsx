import { useMemo, memo } from "react";

export const ReachabilityExploitabilityMatrix = memo(function ReachabilityExploitabilityMatrix({ evaluations = [] }: { evaluations: any[] }) {
  const stats = useMemo(() => {
    const completed = evaluations.filter((e: any) => e.status === "completed");
    return {
      total: completed.length,
      exploitable: completed.filter((e: any) => e.exploitable).length,
    };
  }, [evaluations]);

  const exploitRate = stats.total > 0 ? Math.round((stats.exploitable / stats.total) * 100) : 0;

  return (
    <div className="f-kpi">
      <div className="f-kpi-lbl">
        <span className="f-kpi-dot o" />
        Confirmed Exploits
      </div>
      <div className="f-kpi-val o">
        {stats.exploitable}
      </div>
      <div className="f-kpi-foot">
        {exploitRate}% exploit rate
      </div>
    </div>
  );
});
